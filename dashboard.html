<!DOCTYPE html>
<html lang="en">
<head>
<script>!function(){var a="serlf_auth";try{var b=JSON.parse(localStorage.getItem(a));if(!b||!b.expires||b.expires<Date.now()){localStorage.removeItem(a);window.location.href="../login.html"}}catch(e){window.location.href="../login.html"}}();</script>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>ğŸ“¦ Your Digital Library â€” serlf.store</title>
<style>
:root { 
  --bg: #0a0f1c; --surface: #0f1629; --surface2: #141b2e; --surface3: #1a2138;
  --border: #243044; --text: #e2e8f5; --muted: #94a3b8; --accent: #f97316; 
  --accent-soft: #fb923c; --accent-dark: #ea580c; --green: #34d399; --cyan: #22d3ee;
  --glass-bg: rgba(15, 22, 41, 0.7); --glass-border: rgba(244, 244, 245, 0.1);
}
* { margin: 0; padding: 0; box-sizing: border-box; }
body { 
  background: linear-gradient(135deg, var(--bg) 0%, #0c1220 50%, #0a0f1c 100%); 
  color: var(--text); font-family: 'Inter', -apple-system, system-ui, sans-serif; 
  line-height: 1.6; min-height: 100vh; overflow-x: hidden;
}

/* Glass morphism navbar */
.navbar { 
  position: fixed; top: 0; left: 0; right: 0; z-index: 1000;
  background: var(--glass-bg); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
  border-bottom: 1px solid var(--glass-border); padding: 1rem 2rem;
  display: flex; justify-content: space-between; align-items: center;
}
.nav-brand { 
  display: flex; align-items: center; gap: 0.75rem; font-size: 1.2rem; 
  font-weight: 800; text-decoration: none; color: var(--text);
}
.nav-brand .captain { color: var(--accent); }
.nav-actions { display: flex; align-items: center; gap: 1rem; }
.nav-user { display: flex; align-items: center; gap: 0.5rem; font-size: 0.85rem; color: var(--muted); }
.nav-user img { width: 28px; height: 28px; border-radius: 50%; }
.nav-btn { 
  padding: 0.5rem 1rem; background: var(--glass-bg); border: 1px solid var(--glass-border);
  border-radius: 8px; color: var(--text); text-decoration: none; font-size: 0.85rem; 
  font-weight: 500; transition: all 0.3s; backdrop-filter: blur(10px);
}
.nav-btn:hover { background: var(--accent); border-color: var(--accent); }

/* Main content */
.main { padding-top: 5rem; }

/* Hero section */
.hero { 
  padding: 4rem 2rem; text-align: center; 
  background: radial-gradient(circle at 50% 50%, rgba(249, 115, 22, 0.1) 0%, transparent 50%);
}
.hero-title { 
  font-size: 2.5rem; font-weight: 900; margin-bottom: 1rem;
  background: linear-gradient(135deg, var(--accent), var(--accent-soft)); 
  -webkit-background-clip: text; -webkit-text-fill-color: transparent;
}
.hero-subtitle { color: var(--muted); font-size: 1.1rem; margin-bottom: 2rem; max-width: 600px; margin-left: auto; margin-right: auto; }
.hero-stats { display: flex; justify-content: center; gap: 3rem; margin-top: 2rem; flex-wrap: wrap; }
.hero-stat { text-align: center; }
.hero-stat-num { font-size: 2rem; font-weight: 900; color: var(--accent); }
.hero-stat-label { color: var(--muted); font-size: 0.85rem; margin-top: 0.25rem; }

/* Container */
.container { max-width: 1200px; margin: 0 auto; padding: 0 2rem; }

/* Library sections */
.library-section { margin-bottom: 4rem; }
.section-header { 
  display: flex; justify-content: between; align-items: center; margin-bottom: 2rem;
}
.section-title { 
  font-size: 1.8rem; font-weight: 800; display: flex; align-items: center; gap: 0.75rem;
}
.section-title .emoji { font-size: 2rem; }
.section-subtitle { color: var(--muted); font-size: 0.95rem; margin-top: 0.25rem; }

/* Product grid */
.product-grid { 
  display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); 
  gap: 1.5rem; 
}
.product-card { 
  background: var(--glass-bg); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border); border-radius: 16px; padding: 2rem; 
  transition: all 0.4s ease; position: relative; overflow: hidden;
}
.product-card::before {
  content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0;
  background: linear-gradient(135deg, rgba(249, 115, 22, 0.05), transparent);
  opacity: 0; transition: opacity 0.3s;
}
.product-card:hover { 
  transform: translateY(-4px); border-color: var(--accent); 
  box-shadow: 0 20px 60px rgba(249, 115, 22, 0.2);
}
.product-card:hover::before { opacity: 1; }
.product-icon { 
  font-size: 2.5rem; margin-bottom: 1rem; position: relative; z-index: 2;
}
.product-name { 
  font-size: 1.2rem; font-weight: 700; margin-bottom: 0.5rem; position: relative; z-index: 2;
}
.product-desc { 
  color: var(--muted); font-size: 0.9rem; margin-bottom: 1.5rem; line-height: 1.6; position: relative; z-index: 2;
}
.product-meta { 
  display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem; position: relative; z-index: 2;
}
.product-status { 
  display: flex; align-items: center; gap: 0.4rem; font-size: 0.8rem; font-weight: 600;
}
.product-status.active { color: var(--green); }
.product-status.premium { color: var(--accent); }
.status-dot { width: 6px; height: 6px; border-radius: 50%; }
.dot-green { background: var(--green); }
.dot-orange { background: var(--accent); }
.product-count { 
  background: var(--surface3); padding: 0.25rem 0.75rem; border-radius: 12px; 
  font-size: 0.8rem; color: var(--muted);
}

/* Action buttons */
.product-actions { display: flex; gap: 0.75rem; position: relative; z-index: 2; }
.btn { 
  padding: 0.75rem 1.5rem; border-radius: 8px; font-size: 0.85rem; font-weight: 600; 
  border: none; cursor: pointer; transition: all 0.3s; text-decoration: none;
  display: inline-flex; align-items: center; gap: 0.5rem;
}
.btn-primary { 
  background: linear-gradient(135deg, var(--accent), var(--accent-soft)); color: white; flex: 1; justify-content: center;
}
.btn-primary:hover { 
  background: linear-gradient(135deg, var(--accent-dark), var(--accent)); 
  transform: translateY(-1px); 
}
.btn-secondary { 
  background: var(--glass-bg); border: 1px solid var(--glass-border); color: var(--muted);
  backdrop-filter: blur(10px);
}
.btn-secondary:hover { color: var(--text); border-color: var(--accent); }

/* Download modal */
.modal { 
  display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; 
  background: rgba(0,0,0,0.8); backdrop-filter: blur(4px); z-index: 2000;
  align-items: center; justify-content: center; padding: 2rem;
}
.modal.show { display: flex; }
.modal-content { 
  background: var(--surface); border: 1px solid var(--border); border-radius: 16px; 
  padding: 2.5rem; max-width: 500px; width: 100%; text-align: center;
}
.modal-icon { font-size: 3rem; margin-bottom: 1rem; }
.modal-title { font-size: 1.5rem; font-weight: 800; margin-bottom: 0.5rem; }
.modal-desc { color: var(--muted); margin-bottom: 2rem; }
.modal-actions { display: flex; gap: 1rem; justify-content: center; }

/* Quick access toolbar */
.quick-toolbar { 
  position: fixed; bottom: 2rem; left: 50%; transform: translateX(-50%); z-index: 1000;
  background: var(--glass-bg); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border); border-radius: 16px; padding: 1rem;
  display: flex; gap: 1rem; box-shadow: 0 10px 40px rgba(0,0,0,0.3);
}
.toolbar-btn { 
  display: flex; align-items: center; gap: 0.5rem; padding: 0.75rem 1rem; 
  background: transparent; border: none; border-radius: 10px; color: var(--muted); 
  cursor: pointer; transition: all 0.3s; font-size: 0.85rem; font-weight: 500;
}
.toolbar-btn:hover, .toolbar-btn.active { color: var(--accent); background: rgba(249, 115, 22, 0.1); }

/* Responsive */
@media (max-width: 768px) { 
  .navbar { padding: 1rem; }
  .nav-actions { gap: 0.5rem; }
  .hero { padding: 3rem 1rem; }
  .hero-title { font-size: 2rem; }
  .hero-stats { gap: 2rem; }
  .container { padding: 0 1rem; }
  .product-grid { grid-template-columns: 1fr; gap: 1rem; }
  .product-card { padding: 1.5rem; }
  .quick-toolbar { bottom: 1rem; padding: 0.75rem; flex-wrap: wrap; }
  .modal-content { margin: 1rem; padding: 2rem; }
}

/* Loading animation */
.loading { 
  display: inline-block; width: 16px; height: 16px; border: 2px solid var(--glass-border); 
  border-top-color: var(--accent); border-radius: 50%; animation: spin 0.8s linear infinite; 
}
@keyframes spin { to { transform: rotate(360deg); } }

/* Badge styles */
.badge { 
  display: inline-flex; align-items: center; gap: 0.3rem; padding: 0.2rem 0.6rem; 
  border-radius: 8px; font-size: 0.7rem; font-weight: 600; text-transform: uppercase;
}
.badge-new { background: rgba(52, 211, 153, 0.15); color: var(--green); }
.badge-popular { background: rgba(249, 115, 22, 0.15); color: var(--accent); }
.badge-pro { background: rgba(124, 109, 240, 0.15); color: #7c6df0; }
</style>
</head>
<body>

<!-- Navigation -->
<nav class="navbar">
  <a href="/" class="nav-brand">
    <span class="captain">ğŸ“¦</span>
    <span>serlf.store</span>
  </a>
  <div class="nav-actions">
    <div class="nav-user" id="nav-user"></div>
    <a href="https://serlf.ca/dashboard.html" class="nav-btn">ğŸš€ Platform</a>
  </div>
</nav>

<!-- Main Content -->
<main class="main">

  <!-- Hero Section -->
  <section class="hero">
    <h1 class="hero-title">Your Digital Library</h1>
    <p class="hero-subtitle">Everything you need to build, design, and grow. Professional templates, tools, and resources â€” all in one place.</p>
    <div class="hero-stats">
      <div class="hero-stat">
        <div class="hero-stat-num">50+</div>
        <div class="hero-stat-label">Templates</div>
      </div>
      <div class="hero-stat">
        <div class="hero-stat-num">12</div>
        <div class="hero-stat-label">Categories</div>
      </div>
      <div class="hero-stat">
        <div class="hero-stat-num">âˆ</div>
        <div class="hero-stat-label">Updates</div>
      </div>
    </div>
  </section>

  <div class="container">

    <!-- Website Templates -->
    <section class="library-section">
      <div class="section-header">
        <div>
          <h2 class="section-title">
            <span class="emoji">ğŸŒ</span>
            Website Templates
          </h2>
          <p class="section-subtitle">Professional websites that work out of the box</p>
        </div>
      </div>
      <div class="product-grid">
        <div class="product-card">
          <div class="product-icon">ğŸ¢</div>
          <h3 class="product-name">Business Starter Pack</h3>
          <p class="product-desc">Complete website templates for service businesses. Landing pages, about pages, contact forms â€” everything included.</p>
          <div class="product-meta">
            <div class="product-status active">
              <div class="status-dot dot-green"></div>
              Ready to Download
            </div>
            <div class="product-count">8 templates</div>
          </div>
          <div class="product-actions">
            <button class="btn btn-primary" onclick="downloadProduct('business-starter')">
              <span>ğŸ“¥</span> Download
            </button>
            <button class="btn btn-secondary" onclick="previewProduct('business-starter')">ğŸ‘€ Preview</button>
          </div>
        </div>

        <div class="product-card">
          <div class="product-icon">ğŸ¨</div>
          <h3 class="product-name">Creative Portfolio Kit</h3>
          <p class="product-desc">Stunning portfolio templates for designers, photographers, and creatives. Mobile-responsive and fast-loading.</p>
          <div class="product-meta">
            <div class="product-status active">
              <div class="status-dot dot-green"></div>
              Ready to Download
            </div>
            <div class="product-count">5 templates</div>
          </div>
          <div class="product-actions">
            <button class="btn btn-primary" onclick="downloadProduct('portfolio-kit')">
              <span>ğŸ“¥</span> Download
            </button>
            <button class="btn btn-secondary" onclick="previewProduct('portfolio-kit')">ğŸ‘€ Preview</button>
          </div>
        </div>

        <div class="product-card">
          <div class="product-icon">ğŸ›ï¸</div>
          <h3 class="product-name">E-commerce Essentials</h3>
          <p class="product-desc">Modern online store templates with shopping cart, checkout, and payment integration ready to customize.</p>
          <div class="product-meta">
            <div class="product-status premium">
              <div class="status-dot dot-orange"></div>
              Premium Collection
            </div>
            <div class="product-count">6 templates</div>
          </div>
          <div class="product-actions">
            <button class="btn btn-primary" onclick="downloadProduct('ecommerce-kit')">
              <span>ğŸ“¥</span> Download
            </button>
            <button class="btn btn-secondary" onclick="previewProduct('ecommerce-kit')">ğŸ‘€ Preview</button>
          </div>
        </div>
      </div>
    </section>

    <!-- Email Templates -->
    <section class="library-section">
      <div class="section-header">
        <div>
          <h2 class="section-title">
            <span class="emoji">ğŸ“§</span>
            Email Templates
          </h2>
          <p class="section-subtitle">Professional email designs that convert</p>
        </div>
      </div>
      <div class="product-grid">
        <div class="product-card">
          <div class="product-icon">ğŸ“¬</div>
          <h3 class="product-name">Newsletter Collection</h3>
          <p class="product-desc">Beautiful newsletter templates for every occasion. Welcome series, weekly updates, product launches â€” all covered.</p>
          <div class="product-meta">
            <div class="product-status active">
              <div class="status-dot dot-green"></div>
              Ready to Download
            </div>
            <div class="product-count">12 templates</div>
          </div>
          <div class="product-actions">
            <button class="btn btn-primary" onclick="downloadProduct('newsletter-kit')">
              <span>ğŸ“¥</span> Download
            </button>
            <button class="btn btn-secondary" onclick="previewProduct('newsletter-kit')">ğŸ‘€ Preview</button>
          </div>
        </div>

        <div class="product-card">
          <div class="product-icon">ğŸš€</div>
          <h3 class="product-name">Sales Email Sequences</h3>
          <p class="product-desc">Proven email sequences that convert. Cold outreach, nurture campaigns, and follow-ups that get results.</p>
          <div class="product-meta">
            <div class="product-status premium">
              <div class="status-dot dot-orange"></div>
              Premium Collection
            </div>
            <div class="product-count">20 templates</div>
          </div>
          <div class="product-actions">
            <button class="btn btn-primary" onclick="downloadProduct('sales-emails')">
              <span>ğŸ“¥</span> Download
            </button>
            <button class="btn btn-secondary" onclick="previewProduct('sales-emails')">ğŸ‘€ Preview</button>
          </div>
        </div>
      </div>
    </section>

    <!-- Business Templates -->
    <section class="library-section">
      <div class="section-header">
        <div>
          <h2 class="section-title">
            <span class="emoji">ğŸ“Š</span>
            Business Templates
          </h2>
          <p class="section-subtitle">Documents and tools to run your business</p>
        </div>
      </div>
      <div class="product-grid">
        <div class="product-card">
          <div class="product-icon">ğŸ“‹</div>
          <h3 class="product-name">Proposal & Contract Kit</h3>
          <p class="product-desc">Professional proposals, contracts, and agreements. Protect your business and win more clients with proper documentation.</p>
          <div class="product-meta">
            <div class="product-status active">
              <div class="status-dot dot-green"></div>
              Ready to Download
            </div>
            <div class="product-count">15 documents</div>
          </div>
          <div class="product-actions">
            <button class="btn btn-primary" onclick="downloadProduct('business-docs')">
              <span>ğŸ“¥</span> Download
            </button>
            <button class="btn btn-secondary" onclick="previewProduct('business-docs')">ğŸ‘€ Preview</button>
          </div>
        </div>

        <div class="product-card">
          <div class="product-icon">ğŸ“ˆ</div>
          <h3 class="product-name">Financial Planning Sheets</h3>
          <p class="product-desc">Budgets, forecasts, and financial tracking templates. Keep your business finances organized and profitable.</p>
          <div class="product-meta">
            <div class="product-status active">
              <div class="status-dot dot-green"></div>
              Ready to Download
            </div>
            <div class="product-count">8 spreadsheets</div>
          </div>
          <div class="product-actions">
            <button class="btn btn-primary" onclick="downloadProduct('financial-kit')">
              <span>ğŸ“¥</span> Download
            </button>
            <button class="btn btn-secondary" onclick="previewProduct('financial-kit')">ğŸ‘€ Preview</button>
          </div>
        </div>
      </div>
    </section>

    <!-- Brand Kits -->
    <section class="library-section">
      <div class="section-header">
        <div>
          <h2 class="section-title">
            <span class="emoji">ğŸ¨</span>
            Brand Kits
          </h2>
          <p class="section-subtitle">Complete visual identity systems</p>
        </div>
      </div>
      <div class="product-grid">
        <div class="product-card">
          <div class="product-icon">ğŸŒˆ</div>
          <h3 class="product-name">Startup Brand Kit</h3>
          <p class="product-desc">Everything you need to brand your startup. Logos, color palettes, fonts, business cards, and brand guidelines.</p>
          <div class="product-meta">
            <div class="product-status premium">
              <div class="status-dot dot-orange"></div>
              Premium Collection
            </div>
            <div class="product-count">25+ assets</div>
          </div>
          <div class="product-actions">
            <button class="btn btn-primary" onclick="downloadProduct('startup-brand')">
              <span>ğŸ“¥</span> Download
            </button>
            <button class="btn btn-secondary" onclick="previewProduct('startup-brand')">ğŸ‘€ Preview</button>
          </div>
        </div>

        <div class="product-card">
          <div class="product-icon">ğŸ“±</div>
          <h3 class="product-name">Social Media Templates</h3>
          <p class="product-desc">Instagram posts, stories, YouTube thumbnails, LinkedIn banners â€” all the social media assets you need to stand out.</p>
          <div class="product-meta">
            <div class="product-status active">
              <div class="status-dot dot-green"></div>
              Ready to Download
            </div>
            <div class="product-count">50+ templates</div>
          </div>
          <div class="product-actions">
            <button class="btn btn-primary" onclick="downloadProduct('social-kit')">
              <span>ğŸ“¥</span> Download
            </button>
            <button class="btn btn-secondary" onclick="previewProduct('social-kit')">ğŸ‘€ Preview</button>
          </div>
        </div>
      </div>
    </section>

    <!-- App Starters -->
    <section class="library-section">
      <div class="section-header">
        <div>
          <h2 class="section-title">
            <span class="emoji">ğŸ’»</span>
            App Starters
          </h2>
          <p class="section-subtitle">Ready-to-deploy application templates</p>
        </div>
      </div>
      <div class="product-grid">
        <div class="product-card">
          <div class="product-icon">âš¡</div>
          <h3 class="product-name">React Dashboard Starter</h3>
          <p class="product-desc">Modern React dashboard with authentication, charts, tables, and dark mode. Perfect starting point for SaaS apps.</p>
          <div class="product-meta">
            <div class="product-status premium">
              <div class="status-dot dot-orange"></div>
              Premium Collection
            </div>
            <div class="product-count">Full stack</div>
          </div>
          <div class="product-actions">
            <button class="btn btn-primary" onclick="downloadProduct('react-dashboard')">
              <span>ğŸ“¥</span> Download
            </button>
            <button class="btn btn-secondary" onclick="previewProduct('react-dashboard')">ğŸ‘€ Preview</button>
          </div>
        </div>

        <div class="product-card">
          <div class="product-icon">ğŸ“±</div>
          <h3 class="product-name">Mobile App UI Kit</h3>
          <p class="product-desc">Complete mobile app UI components and screens. iOS and Android compatible designs in Figma and React Native.</p>
          <div class="product-meta">
            <div class="product-status active">
              <div class="status-dot dot-green"></div>
              Ready to Download
            </div>
            <div class="product-count">100+ screens</div>
          </div>
          <div class="product-actions">
            <button class="btn btn-primary" onclick="downloadProduct('mobile-ui')">
              <span>ğŸ“¥</span> Download
            </button>
            <button class="btn btn-secondary" onclick="previewProduct('mobile-ui')">ğŸ‘€ Preview</button>
          </div>
        </div>
      </div>
    </section>

    <!-- Dashboard Templates -->
    <section class="library-section">
      <div class="section-header">
        <div>
          <h2 class="section-title">
            <span class="emoji">ğŸ“Š</span>
            Dashboard Templates
          </h2>
          <p class="section-subtitle">Professional admin and analytics dashboards</p>
        </div>
      </div>
      <div class="product-grid">
        <div class="product-card">
          <div class="product-icon">ğŸ›ï¸</div>
          <h3 class="product-name">Admin Panel Collection</h3>
          <p class="product-desc">Beautiful admin dashboards for any application. User management, analytics, settings pages â€” all included.</p>
          <div class="product-meta">
            <div class="product-status active">
              <div class="status-dot dot-green"></div>
              Ready to Download
            </div>
            <div class="product-count">12 dashboards</div>
          </div>
          <div class="product-actions">
            <button class="btn btn-primary" onclick="downloadProduct('admin-dashboards')">
              <span>ğŸ“¥</span> Download
            </button>
            <button class="btn btn-secondary" onclick="previewProduct('admin-dashboards')">ğŸ‘€ Preview</button>
          </div>
        </div>

        <div class="product-card">
          <div class="product-icon">ğŸ“ˆ</div>
          <h3 class="product-name">Analytics Dashboard Kit</h3>
          <p class="product-desc">Data visualization templates with charts, graphs, and KPI widgets. Perfect for business intelligence applications.</p>
          <div class="product-meta">
            <div class="product-status premium">
              <div class="status-dot dot-orange"></div>
              Premium Collection
            </div>
            <div class="product-count">20+ components</div>
          </div>
          <div class="product-actions">
            <button class="btn btn-primary" onclick="downloadProduct('analytics-dashboard')">
              <span>ğŸ“¥</span> Download
            </button>
            <button class="btn btn-secondary" onclick="previewProduct('analytics-dashboard')">ğŸ‘€ Preview</button>
          </div>
        </div>
      </div>
    </section>

  </div>
</main>

<!-- Download Modal -->
<div class="modal" id="downloadModal">
  <div class="modal-content">
    <div class="modal-icon">ğŸ“¦</div>
    <h3 class="modal-title" id="modalTitle">Preparing Download...</h3>
    <p class="modal-desc" id="modalDesc">Your digital product is being prepared for download.</p>
    <div class="modal-actions">
      <button class="btn btn-primary" id="modalDownloadBtn" style="display:none;">
        <span>ğŸ“¥</span> Download Now
      </button>
      <button class="btn btn-secondary" onclick="closeModal()">Close</button>
    </div>
  </div>
</div>

<!-- Quick Access Toolbar -->
<div class="quick-toolbar">
  <button class="toolbar-btn active" onclick="scrollToSection('websites')">
    <span>ğŸŒ</span> Websites
  </button>
  <button class="toolbar-btn" onclick="scrollToSection('emails')">
    <span>ğŸ“§</span> Emails
  </button>
  <button class="toolbar-btn" onclick="scrollToSection('business')">
    <span>ğŸ“Š</span> Business
  </button>
  <button class="toolbar-btn" onclick="scrollToSection('brand')">
    <span>ğŸ¨</span> Brand
  </button>
  <button class="toolbar-btn" onclick="scrollToSection('apps')">
    <span>ğŸ’»</span> Apps
  </button>
</div>

<script>
// Initialize user info
const auth = JSON.parse(localStorage.getItem('serlf_auth') || '{}');
const userEl = document.getElementById('nav-user');
if (auth.picture) userEl.innerHTML += `<img src="${auth.picture}" alt="">`;
userEl.innerHTML += `<span>${auth.name || auth.email || ''}</span>`;

// Product download simulation
function downloadProduct(productId) {
  const modal = document.getElementById('downloadModal');
  const title = document.getElementById('modalTitle');
  const desc = document.getElementById('modalDesc');
  const downloadBtn = document.getElementById('modalDownloadBtn');
  
  // Product info
  const products = {
    'business-starter': { name: 'Business Starter Pack', files: 8, size: '12.4 MB' },
    'portfolio-kit': { name: 'Creative Portfolio Kit', files: 5, size: '8.7 MB' },
    'ecommerce-kit': { name: 'E-commerce Essentials', files: 6, size: '15.2 MB' },
    'newsletter-kit': { name: 'Newsletter Collection', files: 12, size: '6.3 MB' },
    'sales-emails': { name: 'Sales Email Sequences', files: 20, size: '4.1 MB' },
    'business-docs': { name: 'Proposal & Contract Kit', files: 15, size: '3.8 MB' },
    'financial-kit': { name: 'Financial Planning Sheets', files: 8, size: '2.9 MB' },
    'startup-brand': { name: 'Startup Brand Kit', files: 25, size: '45.7 MB' },
    'social-kit': { name: 'Social Media Templates', files: 50, size: '67.2 MB' },
    'react-dashboard': { name: 'React Dashboard Starter', files: 1, size: '89.4 MB' },
    'mobile-ui': { name: 'Mobile App UI Kit', files: 100, size: '123.8 MB' },
    'admin-dashboards': { name: 'Admin Panel Collection', files: 12, size: '34.6 MB' },
    'analytics-dashboard': { name: 'Analytics Dashboard Kit', files: 20, size: '28.9 MB' }
  };
  
  const product = products[productId];
  
  // Show modal
  modal.classList.add('show');
  title.textContent = 'Preparing Download...';
  desc.textContent = `${product.name} is being prepared for download.`;
  downloadBtn.style.display = 'none';
  
  // Simulate processing
  setTimeout(() => {
    title.textContent = 'Ready to Download!';
    desc.innerHTML = `
      <strong>${product.name}</strong><br>
      ${product.files} files â€¢ ${product.size}<br>
      <small style="color: var(--muted); margin-top: 0.5rem; display: block;">
        Includes source files, documentation, and license
      </small>
    `;
    downloadBtn.style.display = 'inline-flex';
    
    // Set up actual download
    downloadBtn.onclick = () => {
      // Create a mock download
      const blob = new Blob(['# ' + product.name + '\n\nThis is a sample file from serlf.store.\n\nIn a real implementation, this would contain your purchased digital product.'], 
                          { type: 'text/plain' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = productId + '-sample.txt';
      a.click();
      URL.revokeObjectURL(url);
      
      closeModal();
      
      // Show success message
      showNotification('ğŸ“¦ Download started! Check your downloads folder.');
    };
  }, 1500);
  
  // Track download with Stripe (mock)
  fetch('/api/track-download', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ product: productId, user: auth.email })
  }).catch(() => {}); // Fail silently in demo
}

function previewProduct(productId) {
  // Open preview in new tab (mock)
  const previewUrl = `/preview/${productId}`;
  window.open(previewUrl, '_blank');
  showNotification('ğŸ‘€ Preview opening in new tab...');
}

function closeModal() {
  document.getElementById('downloadModal').classList.remove('show');
}

function scrollToSection(section) {
  // Update active toolbar button
  document.querySelectorAll('.toolbar-btn').forEach(btn => btn.classList.remove('active'));
  event.target.closest('.toolbar-btn').classList.add('active');
  
  // Scroll to section (simplified for demo)
  const sections = {
    'websites': document.querySelector('.library-section'),
    'emails': document.querySelectorAll('.library-section')[1],
    'business': document.querySelectorAll('.library-section')[2],
    'brand': document.querySelectorAll('.library-section')[3],
    'apps': document.querySelectorAll('.library-section')[4]
  };
  
  if (sections[section]) {
    sections[section].scrollIntoView({ behavior: 'smooth', block: 'start' });
  }
}

function showNotification(message) {
  // Create notification element
  const notification = document.createElement('div');
  notification.style.cssText = `
    position: fixed; top: 6rem; right: 2rem; z-index: 3000;
    background: var(--glass-bg); backdrop-filter: blur(20px);
    border: 1px solid var(--glass-border); border-radius: 12px;
    padding: 1rem 1.5rem; color: var(--text); font-size: 0.9rem;
    transform: translateX(100%); transition: transform 0.3s ease;
    box-shadow: 0 10px 40px rgba(0,0,0,0.3);
  `;
  notification.textContent = message;
  document.body.appendChild(notification);
  
  // Animate in
  setTimeout(() => notification.style.transform = 'translateX(0)', 100);
  
  // Remove after delay
  setTimeout(() => {
    notification.style.transform = 'translateX(100%)';
    setTimeout(() => notification.remove(), 300);
  }, 3000);
}

// Billing integration (mock Stripe)
function initializeBilling() {
  // In a real implementation, this would:
  // 1. Load Stripe.js
  // 2. Create customer session if needed
  // 3. Handle subscription status
  // 4. Enable/disable premium products
  
  console.log('Billing initialized for user:', auth.email);
}

// Initialize on load
document.addEventListener('DOMContentLoaded', () => {
  initializeBilling();
  
  // Add smooth scroll behavior
  document.documentElement.style.scrollBehavior = 'smooth';
  
  // Track page view (mock analytics)
  if (window.gtag) {
    gtag('event', 'page_view', {
      page_title: 'Digital Library',
      page_location: window.location.href
    });
  }
});

// Close modal on escape key
document.addEventListener('keydown', (e) => {
  if (e.key === 'Escape') closeModal();
});

// Close modal on backdrop click
document.getElementById('downloadModal').addEventListener('click', (e) => {
  if (e.target === e.currentTarget) closeModal();
});
</script>

</body>
</html>