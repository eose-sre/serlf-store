<!DOCTYPE html>
<html lang="en">
<head>
<script>!function(){var a="serlf_auth";try{var b=JSON.parse(localStorage.getItem(a));if(!b||!b.expires||b.expires<Date.now()){localStorage.removeItem(a);window.location.href="login.html"}}catch(e){window.location.href="login.html"}}();</script>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>serlf Platform ‚Äî Command Center</title>
<style>
:root { --bg: #060610; --surface: #0c0c1a; --surface2: #12122a; --border: #1a1a3e; --text: #e8e8f0; --muted: #6b6b8d; --green: #34d399; --cyan: #22d3ee; --accent: #7c6df0; --accent2: #f06292; --red: #ef4444; --yellow: #f59e0b; }
* { margin: 0; padding: 0; box-sizing: border-box; }
body { background: var(--bg); color: var(--text); font-family: 'Inter', -apple-system, system-ui, sans-serif; line-height: 1.6; height: 100vh; display: flex; flex-direction: column; overflow: hidden; }

/* Top bar */
.topbar { display: flex; justify-content: space-between; align-items: center; padding: 0.75rem 1.5rem; border-bottom: 1px solid var(--border); flex-shrink: 0; background: var(--surface); }
.topbar-left { display: flex; align-items: center; gap: 1rem; }
.topbar-logo { font-size: 1.2rem; font-weight: 800; background: linear-gradient(135deg, var(--accent), var(--accent2)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
.topbar-title { font-size: 0.85rem; color: var(--muted); }
.topbar-right { display: flex; align-items: center; gap: 1rem; }
.topbar-user { display: flex; align-items: center; gap: 0.5rem; font-size: 0.85rem; }
.topbar-user img { width: 24px; height: 24px; border-radius: 50%; }
.status-indicator { display: flex; align-items: center; gap: 0.4rem; font-size: 0.75rem; color: var(--green); }
.status-indicator .dot { width: 6px; height: 6px; border-radius: 50%; background: var(--green); animation: pulse 2s infinite; }
@keyframes pulse { 0%,100%{opacity:1} 50%{opacity:0.4} }

/* Main layout */
.main { flex: 1; display: flex; overflow: hidden; }

/* Sidebar */
.sidebar { width: 240px; background: var(--surface); border-right: 1px solid var(--border); display: flex; flex-direction: column; flex-shrink: 0; overflow-y: auto; }
.sidebar-section { padding: 1rem; border-bottom: 1px solid var(--border); }
.sidebar-label { font-size: 0.7rem; text-transform: uppercase; letter-spacing: 1.5px; color: var(--muted); margin-bottom: 0.75rem; font-weight: 600; }

.agent-list { display: flex; flex-direction: column; gap: 4px; }
.agent-item { display: flex; align-items: center; gap: 0.6rem; padding: 8px 10px; border-radius: 8px; cursor: pointer; transition: all 0.15s; font-size: 0.85rem; }
.agent-item:hover { background: rgba(255,255,255,0.04); }
.agent-item.active { background: rgba(52,211,153,0.1); color: var(--green); }
.agent-emoji { font-size: 1.1rem; width: 24px; text-align: center; }
.agent-name { font-weight: 500; flex: 1; }
.agent-status { width: 6px; height: 6px; border-radius: 50%; }
.online { background: var(--green); }
.setting-up { background: var(--cyan); animation: pulse 1.5s infinite; }

.nav-item { display: flex; align-items: center; gap: 0.6rem; padding: 8px 10px; border-radius: 8px; cursor: pointer; transition: all 0.15s; font-size: 0.85rem; color: var(--muted); }
.nav-item:hover { background: rgba(255,255,255,0.04); color: var(--text); }
.nav-item.active { background: rgba(124,109,240,0.1); color: var(--accent); }
.nav-icon { width: 20px; text-align: center; }

/* Content area */
.content { flex: 1; display: flex; flex-direction: column; overflow: hidden; }

/* Tabs */
.tabs { display: flex; border-bottom: 1px solid var(--border); flex-shrink: 0; background: var(--surface); }
.tab { padding: 0.75rem 1.5rem; font-size: 0.85rem; font-weight: 500; color: var(--muted); cursor: pointer; border-bottom: 2px solid transparent; transition: all 0.2s; }
.tab:hover { color: var(--text); background: rgba(255,255,255,0.02); }
.tab.active { color: var(--green); border-bottom-color: var(--green); }

/* Panels */
.panel { flex: 1; overflow-y: auto; display: none; }
.panel.active { display: flex; flex-direction: column; }

/* Chat panel */
.chat-messages { flex: 1; overflow-y: auto; padding: 1.5rem; display: flex; flex-direction: column; gap: 0.75rem; }
.msg { max-width: 75%; padding: 0.85rem 1.1rem; border-radius: 14px; font-size: 0.9rem; line-height: 1.6; animation: fadeIn 0.3s ease; }
@keyframes fadeIn { from{opacity:0;transform:translateY(6px)} to{opacity:1;transform:translateY(0)} }
.msg-ai { background: var(--surface2); border: 1px solid var(--border); align-self: flex-start; border-bottom-left-radius: 4px; }
.msg-user { background: rgba(52,211,153,0.1); border: 1px solid rgba(52,211,153,0.15); align-self: flex-end; border-bottom-right-radius: 4px; }
.msg-name { font-size: 0.7rem; font-weight: 600; color: var(--green); margin-bottom: 3px; }
.msg-system { align-self: center; color: var(--muted); font-size: 0.8rem; font-style: italic; background: none; border: none; padding: 0.5rem; }

.chat-input { padding: 1rem 1.5rem; border-top: 1px solid var(--border); flex-shrink: 0; }
.input-row { display: flex; gap: 0.6rem; }
.input-row input { flex: 1; padding: 0.8rem 1rem; background: var(--surface2); border: 1px solid var(--border); border-radius: 10px; color: var(--text); font-size: 0.9rem; font-family: inherit; outline: none; }
.input-row input:focus { border-color: var(--green); }
.input-row button { padding: 0.8rem 1.2rem; background: linear-gradient(135deg, var(--green), var(--cyan)); color: var(--bg); border: none; border-radius: 10px; font-weight: 700; cursor: pointer; font-size: 0.85rem; }

/* Overview panel */
.overview { padding: 1.5rem; }
.overview-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; margin-bottom: 1.5rem; }
.stat-card { background: var(--surface2); border: 1px solid var(--border); border-radius: 12px; padding: 1.2rem; }
.stat-value { font-size: 1.8rem; font-weight: 900; }
.stat-label { font-size: 0.75rem; color: var(--muted); margin-top: 0.25rem; }
.agent-grid-full { display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; }
.agent-card-full { background: var(--surface2); border: 1px solid var(--border); border-radius: 12px; padding: 1.2rem; display: flex; gap: 1rem; align-items: center; }
.agent-card-emoji { font-size: 2rem; }
.agent-card-info { flex: 1; }
.agent-card-name { font-weight: 700; font-size: 0.95rem; }
.agent-card-role { font-size: 0.8rem; color: var(--muted); }
.agent-card-stat { font-size: 0.75rem; margin-top: 0.25rem; }

/* Fleet panel */
.fleet-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; padding: 1.5rem; }
.fleet-card { background: var(--surface2); border: 1px solid var(--border); border-radius: 12px; padding: 1.5rem; transition: all 0.2s; }
.fleet-card:hover { border-color: var(--green); }
.fleet-domain { font-weight: 700; font-size: 1rem; margin-bottom: 0.25rem; }
.fleet-captain { font-size: 0.85rem; color: var(--muted); }
.fleet-status { display: flex; align-items: center; gap: 0.4rem; margin-top: 0.5rem; font-size: 0.75rem; color: var(--green); }

/* Settings panel */
.settings { padding: 1.5rem; }
.setting-group { background: var(--surface2); border: 1px solid var(--border); border-radius: 12px; padding: 1.5rem; margin-bottom: 1rem; }
.setting-title { font-weight: 700; margin-bottom: 1rem; }
.setting-row { display: flex; justify-content: space-between; align-items: center; padding: 0.6rem 0; border-bottom: 1px solid var(--border); }
.setting-row:last-child { border: none; }
.setting-name { font-size: 0.9rem; }
.setting-value { font-size: 0.85rem; color: var(--green); }
.toggle { width: 40px; height: 22px; background: var(--border); border-radius: 11px; position: relative; cursor: pointer; transition: background 0.2s; }
.toggle.on { background: var(--green); }
.toggle::after { content: ''; position: absolute; width: 18px; height: 18px; background: #fff; border-radius: 50%; top: 2px; left: 2px; transition: left 0.2s; }
.toggle.on::after { left: 20px; }

/* Logs panel */
.logs { padding: 1.5rem; font-family: 'Courier New', monospace; font-size: 0.8rem; }
.log-line { padding: 3px 0; }
.log-time { color: var(--muted); }
.log-info { color: var(--cyan); }
.log-ok { color: var(--green); }
.log-warn { color: var(--yellow); }

@media (max-width: 768px) {
  .sidebar { display: none; }
  .overview-grid { grid-template-columns: 1fr; }
  .fleet-grid { grid-template-columns: 1fr; }
  .agent-grid-full { grid-template-columns: 1fr; }
}
</style>
</head>
<body>

<div class="topbar">
  <div class="topbar-left">
    <a href="dashboard.html" class="topbar-logo" style="text-decoration:none;">serlf</a>
    <span class="topbar-title">Platform ¬∑ Command Center</span>
  </div>
  <div class="topbar-right">
    <div class="status-indicator"><div class="dot"></div> All Systems Online</div>
    <div class="topbar-user" id="topbar-user"></div>
  </div>
</div>

<div class="main">
  <div class="sidebar">
    <div class="sidebar-section">
      <div class="sidebar-label">AI Agents</div>
      <div class="agent-list" id="agent-list"></div>
    </div>
    <div class="sidebar-section">
      <div class="sidebar-label">Navigation</div>
      <div class="nav-item active" onclick="showTab('overview')"><span class="nav-icon">üìä</span> Overview</div>
      <div class="nav-item" onclick="showTab('fleet')"><span class="nav-icon">üöÄ</span> Fleet</div>
      <div class="nav-item" onclick="showTab('logs')"><span class="nav-icon">üìã</span> Activity Log</div>
      <div class="nav-item" onclick="showTab('settings')"><span class="nav-icon">‚öôÔ∏è</span> Settings</div>
    </div>
    <div class="sidebar-section" style="margin-top:auto;">
      <div class="nav-item" onclick="window.location.href='dashboard.html'"><span class="nav-icon">‚Üê</span> Dashboard</div>
      <div class="nav-item" onclick="signOut()"><span class="nav-icon">üö™</span> Sign Out</div>
    </div>
  </div>

  <div class="content">
    <div class="tabs" id="tabs">
      <div class="tab active" onclick="showTab('overview')">Overview</div>
      <div class="tab" onclick="showTab('chat')">Chat</div>
      <div class="tab" onclick="showTab('fleet')">Fleet</div>
      <div class="tab" onclick="showTab('logs')">Activity</div>
      <div class="tab" onclick="showTab('settings')">Settings</div>
    </div>

    <!-- Overview Panel -->
    <div class="panel active" id="panel-overview">
      <div class="overview">
        <div class="overview-grid">
          <div class="stat-card"><div class="stat-value" style="color:var(--green);">5</div><div class="stat-label">Active Agents</div></div>
          <div class="stat-card"><div class="stat-value" style="color:var(--cyan);">8</div><div class="stat-label">Domains</div></div>
          <div class="stat-card"><div class="stat-value" style="color:var(--accent);">6</div><div class="stat-label">Products</div></div>
        </div>
        <h3 style="font-size:1rem;margin-bottom:1rem;">Your AI Team</h3>
        <div class="agent-grid-full" id="agent-grid"></div>
      </div>
    </div>

    <!-- Chat Panel -->
    <div class="panel" id="panel-chat">
      <div class="chat-messages" id="messages"></div>
      <div class="chat-input">
        <div class="input-row">
          <input type="text" id="chatInput" placeholder="Message your AI team..." onkeydown="if(event.key==='Enter')sendMessage()">
          <button onclick="sendMessage()">Send</button>
        </div>
      </div>
    </div>

    <!-- Fleet Panel -->
    <div class="panel" id="panel-fleet">
      <div class="fleet-grid" id="fleet-grid"></div>
    </div>

    <!-- Logs Panel -->
    <div class="panel" id="panel-logs">
      <div class="logs" id="logs"></div>
    </div>

    <!-- Settings Panel -->
    <div class="panel" id="panel-settings">
      <div class="settings">
        <div class="setting-group">
          <div class="setting-title">ü§ñ AI Configuration</div>
          <div class="setting-row"><span class="setting-name">Model</span><span class="setting-value">Claude Sonnet</span></div>
          <div class="setting-row"><span class="setting-name">Response Style</span><span class="setting-value">Professional</span></div>
          <div class="setting-row"><span class="setting-name">Auto-respond</span><div class="toggle on" onclick="this.classList.toggle('on')"></div></div>
          <div class="setting-row"><span class="setting-name">Learning Mode</span><div class="toggle on" onclick="this.classList.toggle('on')"></div></div>
        </div>
        <div class="setting-group">
          <div class="setting-title">üîê Security</div>
          <div class="setting-row"><span class="setting-name">Environment</span><span class="setting-value">Isolated</span></div>
          <div class="setting-row"><span class="setting-name">Encryption</span><span class="setting-value">AES-256 + TLS 1.3</span></div>
          <div class="setting-row"><span class="setting-name">mTLS</span><span class="setting-value">STRICT</span></div>
          <div class="setting-row"><span class="setting-name">2FA Required</span><div class="toggle on" onclick="this.classList.toggle('on')"></div></div>
        </div>
        <div class="setting-group">
          <div class="setting-title">üìß Notifications</div>
          <div class="setting-row"><span class="setting-name">Email Alerts</span><div class="toggle on" onclick="this.classList.toggle('on')"></div></div>
          <div class="setting-row"><span class="setting-name">Weekly Report</span><div class="toggle" onclick="this.classList.toggle('on')"></div></div>
          <div class="setting-row"><span class="setting-name">Security Alerts</span><div class="toggle on" onclick="this.classList.toggle('on')"></div></div>
        </div>
      </div>
    </div>
  </div>
</div>

<script src="serlf-api.js"></script>
<script>
const auth = JSON.parse(localStorage.getItem('serlf_auth') || '{}');
const userName = (auth.name || 'there').split(' ')[0];
let currentAgent = 'operations';
let msgHistory = [];

// Agents
const agents = [
  { id:'operations', emoji:'üíº', name:'Operations', role:'Tasks, workflows, scheduling', status:'online' },
  { id:'content', emoji:'‚úçÔ∏è', name:'Content', role:'Writing, copy, communications', status:'online' },
  { id:'security', emoji:'üîê', name:'Security', role:'Monitoring, compliance, audits', status:'online' },
  { id:'research', emoji:'üîç', name:'Research', role:'Data, competitors, insights', status:'online' },
  { id:'creative', emoji:'üé®', name:'Creative', role:'Design, branding, visuals', status:'online' }
];

// Fleet
const fleet = [
  { domain:'serlf.ca', captain:'Captain Maple', emoji:'üçÅ', color:'#ef4444', products:'Platform, Sites, Security' },
  { domain:'serlf.com', captain:'Captain Global', emoji:'üåç', color:'#7c6df0', products:'All 6 Products' },
  { domain:'serlf.net', captain:'Captain Dev', emoji:'üíª', color:'#22d3ee', products:'API, SDKs, Docs' },
  { domain:'serlf.org', captain:'Captain Community', emoji:'ü§ù', color:'#f59e0b', products:'Forums, KB' },
  { domain:'serlf.club', captain:'Captain Club', emoji:'üéñÔ∏è', color:'#a855f7', products:'Members, Perks' },
  { domain:'serlf.info', captain:'Captain Help', emoji:'‚ùì', color:'#14b8a6', products:'Support, FAQs' },
  { domain:'serlf.shop', captain:'Captain Commerce', emoji:'üõí', color:'#ec4899', products:'Marketplace' },
  { domain:'serlf.store', captain:'Captain Products', emoji:'üì¶', color:'#f97316', products:'Templates, Kits' }
];

// Build sidebar agents
document.getElementById('agent-list').innerHTML = agents.map((a,i) => `
  <div class="agent-item ${i===0?'active':''}" onclick="switchAgent('${a.id}',this)">
    <span class="agent-emoji">${a.emoji}</span>
    <span class="agent-name">${a.name}</span>
    <span class="agent-status ${a.status}"></span>
  </div>
`).join('');

// Build overview agent grid
document.getElementById('agent-grid').innerHTML = agents.map(a => `
  <div class="agent-card-full">
    <div class="agent-card-emoji">${a.emoji}</div>
    <div class="agent-card-info">
      <div class="agent-card-name">${a.name}</div>
      <div class="agent-card-role">${a.role}</div>
      <div class="agent-card-stat" style="color:var(--green);">‚óè Online</div>
    </div>
  </div>
`).join('');

// Build fleet grid
document.getElementById('fleet-grid').innerHTML = fleet.map(f => `
  <a href="https://${f.domain}" target="_blank" class="fleet-card" style="text-decoration:none;color:var(--text);">
    <div style="font-size:1.5rem;margin-bottom:0.5rem;">${f.emoji}</div>
    <div class="fleet-domain" style="color:${f.color};">${f.domain}</div>
    <div class="fleet-captain">${f.captain}</div>
    <div style="font-size:0.8rem;color:var(--muted);margin-top:0.25rem;">${f.products}</div>
    <div class="fleet-status"><div class="dot" style="background:var(--green);width:6px;height:6px;border-radius:50%;"></div> Live</div>
  </a>
`).join('');

// Build logs
const logEntries = [
  { time: '12:36', level: 'ok', msg: 'All 8 welcome emails sent successfully' },
  { time: '12:34', level: 'ok', msg: 'Owner panel deployed ‚Äî SSO role detection active' },
  { time: '12:30', level: 'ok', msg: '8 unique domain sites deployed ‚Äî Captain series live' },
  { time: '12:24', level: 'info', msg: 'V2 Captain Fleet architecture pushed to fleet repo' },
  { time: '12:20', level: 'ok', msg: 'All 6 products rebuilt ‚Äî fully functional' },
  { time: '12:15', level: 'ok', msg: 'Google SSO wired ‚Äî OAuth Client ID active' },
  { time: '12:10', level: 'ok', msg: 'Auth gate deployed ‚Äî login required for protected pages' },
  { time: '12:05', level: 'ok', msg: 'Gmail SMTP relay established ‚Äî email service live' },
  { time: '12:00', level: 'ok', msg: 'Stripe live payments ‚Äî Customer #1 confirmed' },
  { time: '11:55', level: 'info', msg: 'Birthday page locked to authorized-user only' },
  { time: '11:50', level: 'ok', msg: 'All 8 serlf domains verified ‚Äî SSL active' },
  { time: '11:45', level: 'warn', msg: 'Port 25 blocked from AKS ‚Äî NP-L1-020 discovered' },
  { time: '11:30', level: 'ok', msg: 'serlf launched ‚Äî $1/month, 8 domains, 6 products' },
];
document.getElementById('logs').innerHTML = logEntries.map(l => `
  <div class="log-line"><span class="log-time">[${l.time}]</span> <span class="log-${l.level}">${l.level.toUpperCase()}</span> ${l.msg}</div>
`).join('');

// User info
const userEl = document.getElementById('topbar-user');
if (auth.picture) userEl.innerHTML += `<img src="${auth.picture}" alt="">`;
userEl.innerHTML += `<span>${auth.name || auth.email || ''}</span>`;

// Tab switching
function showTab(id) {
  document.querySelectorAll('.panel').forEach(p => p.classList.remove('active'));
  document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
  document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
  document.getElementById('panel-' + id).classList.add('active');
  document.querySelectorAll('.tab').forEach(t => { if(t.textContent.toLowerCase().includes(id.substring(0,4))) t.classList.add('active'); });
  if (id === 'chat' && document.getElementById('messages').children.length === 0) {
    addMessage(getGreeting(), 'ai', agents.find(a=>a.id===currentAgent).emoji + ' ' + agents.find(a=>a.id===currentAgent).name);
  }
}

function switchAgent(id, el) {
  currentAgent = id;
  document.querySelectorAll('.agent-item').forEach(a => a.classList.remove('active'));
  if(el) el.classList.add('active');
  document.getElementById('messages').innerHTML = '';
  showTab('chat');
  addMessage(getGreeting(), 'ai', agents.find(a=>a.id===id).emoji + ' ' + agents.find(a=>a.id===id).name);
}

function getGreeting() {
  const greetings = {
    operations: `Hi ${userName}! I'm your Operations agent. Tasks, scheduling, workflows ‚Äî I keep things running. What do you need?`,
    content: `Hey ${userName}! Content agent here. I write emails, blogs, social posts, and marketing copy. What are we creating?`,
    security: `Hello ${userName}. Security agent online. Your environment is isolated and encrypted. What should I check?`,
    research: `Hi ${userName}! Research agent ready. Markets, competitors, trends, data ‚Äî what should I investigate?`,
    creative: `Hey ${userName}! üé® Creative agent at your service. Design, branding, visuals ‚Äî let's make something beautiful.`
  };
  return greetings[currentAgent] || greetings.operations;
}

function addMessage(text, type, name) {
  const div = document.createElement('div');
  div.className = 'msg msg-' + type;
  if (type === 'ai' && name) div.innerHTML = '<div class="msg-name">' + name + '</div>' + text;
  else div.textContent = text;
  document.getElementById('messages').appendChild(div);
  document.getElementById('messages').scrollTop = 99999;
}

// Smart responses
function getResponse(agent, text) {
  const t = text.toLowerCase();
  msgHistory.push(t);
  const r = {
    operations: { status:["All systems green. 8 domains live, 6 products active, 5 agents online. No alerts.","Environment healthy. Last deploy was minutes ago. All services responding."], help:["I handle: tasks, scheduling, workflows, team coordination, and process optimization."], default:["I'll set that up. Want me to create a timeline?","Noted. I'll organize this and get back to you.","Good call. Let me break this into actionable steps.","On it. Priority level?","I'll map that out. First step is...","Let me coordinate with the team on this."] },
    content: { default:["I'll draft that. What tone ‚Äî professional, casual, or bold?","Writing mode on. First draft coming up.","Great topic. Let me outline the structure first.","I'll create 3 angles ‚Äî you pick the winner.","Love it. Punchy or detailed?","Let me craft something that grabs attention."] },
    security: { default:["Security check complete ‚Äî no issues.","All clear. Isolation and encryption holding strong.","I'll add this to the monitoring queue.","Running a scan now... stand by.","Your environment scored 95/100 on the last audit.","One minor recommendation ‚Äî want details?"] },
    research: { default:["Interesting. Let me dig into the data.","I found some relevant insights. Compiling now.","The trend is positive. Want the full analysis?","Cross-referencing sources... initial findings look promising.","I'll have a report ready shortly.","There's an opportunity here. Let me quantify it."] },
    creative: { default:["Love this direction! Let me visualize it.","I see it ‚Äî clean, bold, modern. Let me sketch options.","Creative wheels turning. This could be special.","I'll design 3 concepts. Which vibe resonates?","The aesthetic is coming together beautifully.","Bold choice. Let me make it pop."] }
  };
  const ar = r[agent] || r.operations;
  if (t.match(/status|how.*look|update/)) return pick(ar.status || ar.default);
  if (t.match(/help|what can/)) return pick(ar.help || ar.default);
  return pick(ar.default);
}

function pick(arr) {
  let c = arr[Math.floor(Math.random()*arr.length)];
  if(arr.length>1){ let i=0; while(c===window._lr&&i<5){c=arr[Math.floor(Math.random()*arr.length)];i++;} }
  window._lr=c; return c;
}

function sendMessage() {
  const input = document.getElementById('chatInput');
  const text = input.value.trim();
  if (!text) return;
  addMessage(text, 'user');
  input.value = '';
  const a = agents.find(a=>a.id===currentAgent);
  const typing = document.createElement('div');
  typing.className = 'msg msg-ai';
  typing.innerHTML = '<div class="msg-name">' + a.emoji + ' ' + a.name + '</div><span style="color:var(--muted);font-style:italic;">Thinking...</span>';
  document.getElementById('messages').appendChild(typing);
  document.getElementById('messages').scrollTop = 99999;
  setTimeout(() => {
    typing.remove();
    addMessage(getResponse(currentAgent, text), 'ai', a.emoji + ' ' + a.name);
  }, 600 + Math.random() * 800);
}

function signOut() { localStorage.removeItem('serlf_auth'); window.location.href = 'login.html'; }
</script>
</body>
</html>
