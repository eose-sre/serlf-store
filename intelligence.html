<!DOCTYPE html>
<html lang="en">
<head>
<script>!function(){var a="serlf_auth";try{var b=JSON.parse(localStorage.getItem(a));if(!b||!b.expires||b.expires<Date.now()){localStorage.removeItem(a);window.location.href="login.html"}}catch(e){window.location.href="login.html"}}();</script>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>serlf Intelligence ‚Äî Your Insights</title>
<style>
:root { --bg: #060610; --surface: #0c0c1a; --surface2: #12122a; --border: #1a1a3e; --text: #e8e8f0; --muted: #6b6b8d; --green: #34d399; --cyan: #22d3ee; --accent: #7c6df0; --accent2: #f06292; }
* { margin: 0; padding: 0; box-sizing: border-box; }
body { background: var(--bg); color: var(--text); font-family: 'Inter', -apple-system, system-ui, sans-serif; line-height: 1.6; }
nav { padding: 1rem 2rem; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--border); }
.nav-logo { font-size: 1.3rem; font-weight: 800; letter-spacing: -1px; background: linear-gradient(135deg, var(--accent), var(--accent2)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; text-decoration: none; }
.nav-links { display: flex; gap: 1.5rem; align-items: center; }
.nav-links a { color: var(--muted); font-size: 0.85rem; font-weight: 500; text-decoration: none; }
.nav-badge { background: rgba(52,211,153,0.15); color: var(--green); padding: 3px 10px; border-radius: 12px; font-size: 0.7rem; font-weight: 700; text-transform: uppercase; }
.container { max-width: 1000px; margin: 0 auto; padding: 3rem 2rem; }
h1 span { background: linear-gradient(135deg, var(--green), var(--cyan)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
.desc { color: var(--muted); font-size: 1.05rem; margin-bottom: 2rem; }

.metrics { display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; margin-bottom: 2rem; }
.metric { background: var(--surface); border: 1px solid var(--border); border-radius: 12px; padding: 1.5rem; text-align: center; }
.metric-value { font-size: 2rem; font-weight: 900; }
.metric-label { color: var(--muted); font-size: 0.8rem; margin-top: 0.25rem; }
.metric-change { font-size: 0.75rem; margin-top: 0.5rem; }
.up { color: var(--green); }
.down { color: #ef4444; }

.chart-card { background: var(--surface); border: 1px solid var(--border); border-radius: 16px; padding: 2rem; margin-bottom: 1.5rem; }
.chart-title { font-weight: 700; font-size: 1.1rem; margin-bottom: 1rem; }
.chart { display: flex; align-items: flex-end; gap: 6px; height: 200px; padding-top: 1rem; }
.bar { flex: 1; background: linear-gradient(to top, var(--green), var(--cyan)); border-radius: 4px 4px 0 0; min-width: 20px; transition: height 0.5s ease; position: relative; cursor: pointer; }
.bar:hover { opacity: 0.8; }
.bar-label { position: absolute; bottom: -24px; left: 50%; transform: translateX(-50%); font-size: 0.65rem; color: var(--muted); white-space: nowrap; }
.bar-value { position: absolute; top: -20px; left: 50%; transform: translateX(-50%); font-size: 0.7rem; color: var(--text); font-weight: 600; opacity: 0; transition: opacity 0.2s; }
.bar:hover .bar-value { opacity: 1; }

.insights { display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; margin-bottom: 2rem; }
.insight { background: var(--surface); border: 1px solid var(--border); border-radius: 12px; padding: 1.5rem; }
.insight-icon { font-size: 1.5rem; margin-bottom: 0.5rem; }
.insight-title { font-weight: 600; font-size: 0.95rem; margin-bottom: 0.5rem; }
.insight-text { color: var(--muted); font-size: 0.85rem; }

.analyze-box { background: var(--surface); border: 1px solid var(--border); border-radius: 16px; padding: 2rem; margin-bottom: 2rem; }
.analyze-input { display: flex; gap: 0.75rem; margin-top: 1rem; }
.analyze-input input { flex: 1; padding: 0.9rem 1.2rem; background: var(--surface2); border: 1px solid var(--border); border-radius: 10px; color: var(--text); font-size: 1rem; font-family: inherit; outline: none; }
.analyze-input button { padding: 0.9rem 2rem; background: linear-gradient(135deg, var(--green), var(--cyan)); color: #060610; border: none; border-radius: 10px; font-weight: 700; cursor: pointer; }

@media (max-width: 768px) { .metrics { grid-template-columns: repeat(2, 1fr); } .insights { grid-template-columns: 1fr; } }
</style>
</head>
<body>
<nav>
  <a href="dashboard.html" class="nav-logo">serlf</a>
  <div class="nav-links"><span class="nav-badge">Intelligence</span><a href="dashboard.html">Dashboard</a></div>
</nav>
<div class="container">
  <div style="font-size:3rem;margin-bottom:1rem;">üìä</div>
  <h1>serlf <span>Intelligence</span></h1>
  <p class="desc">AI-powered insights for your business.</p>

  <div class="metrics" id="metrics"></div>

  <div class="chart-card">
    <div class="chart-title">üìà Activity ‚Äî Last 30 Days</div>
    <div class="chart" id="chart"></div>
  </div>

  <div class="analyze-box">
    <h3 style="font-size:1.1rem;">üîç Ask a Question</h3>
    <p style="color:var(--muted);font-size:0.9rem;margin-top:0.5rem;">Ask anything about your data, trends, or business.</p>
    <div class="analyze-input">
      <input type="text" id="question" placeholder="e.g. What's my busiest day?" onkeydown="if(event.key==='Enter')askQuestion()">
      <button onclick="askQuestion()">Analyze</button>
    </div>
    <div id="answer" style="margin-top:1rem;display:none;padding:1rem;background:var(--surface2);border-radius:10px;"></div>
  </div>

  <h3 style="font-size:1.1rem;margin-bottom:1rem;">üí° AI Insights</h3>
  <div class="insights" id="insights"></div>

  <a href="dashboard.html" style="color:var(--muted);text-decoration:none;font-size:0.9rem;">‚Üê Back to Dashboard</a>
</div>

<script>
// Generate realistic-looking data
const auth = JSON.parse(localStorage.getItem('serlf_auth') || '{}');
const days = ['Mon','Tue','Wed','Thu','Fri','Sat','Sun'];
const data = Array.from({length: 30}, () => Math.floor(20 + Math.random() * 80));

// Metrics
const metricsData = [
  { value: data.reduce((a,b) => a+b, 0), label: 'Total Actions', change: '+12%', dir: 'up' },
  { value: Math.max(...data), label: 'Peak Day', change: '+8%', dir: 'up' },
  { value: Math.round(data.reduce((a,b) => a+b, 0) / 30), label: 'Daily Average', change: '+5%', dir: 'up' },
  { value: '99.9%', label: 'Uptime', change: 'Stable', dir: 'up' }
];

document.getElementById('metrics').innerHTML = metricsData.map(m => `
  <div class="metric">
    <div class="metric-value" style="color:var(--green);">${m.value}</div>
    <div class="metric-label">${m.label}</div>
    <div class="metric-change ${m.dir}">${m.dir === 'up' ? '‚Üë' : '‚Üì'} ${m.change}</div>
  </div>
`).join('');

// Chart
document.getElementById('chart').innerHTML = data.map((v, i) => `
  <div class="bar" style="height:${v}%">
    <div class="bar-value">${v}</div>
    ${i % 5 === 0 ? `<div class="bar-label">${i+1}</div>` : ''}
  </div>
`).join('');

// Insights
const insightsData = [
  { icon: 'üìà', title: 'Growth Trend', text: 'Your activity has increased 12% compared to last week. Keep it up!' },
  { icon: '‚è∞', title: 'Peak Hours', text: 'Most activity happens between 9am-11am and 2pm-4pm. Consider scheduling important tasks then.' },
  { icon: 'üéØ', title: 'Top Product', text: 'serlf Sites is your most-used product, followed by Platform.' },
  { icon: 'üí°', title: 'Recommendation', text: 'Try serlf Intelligence queries to uncover hidden patterns in your business data.' }
];
document.getElementById('insights').innerHTML = insightsData.map(i => `
  <div class="insight">
    <div class="insight-icon">${i.icon}</div>
    <div class="insight-title">${i.title}</div>
    <div class="insight-text">${i.text}</div>
  </div>
`).join('');

// Q&A
const answers = {
  'busiest': 'Based on your data, your busiest day was Day ' + (data.indexOf(Math.max(...data)) + 1) + ' with ' + Math.max(...data) + ' actions. Weekdays tend to be 35% busier than weekends.',
  'average': 'Your daily average is ' + Math.round(data.reduce((a,b) => a+b, 0) / 30) + ' actions per day, which is trending upward.',
  'trend': 'The overall trend is positive ‚Äî activity is up 12% week-over-week with consistent growth.',
  'default': 'Great question! Based on your current data: your platform is healthy with 99.9% uptime, activity is trending up, and your most active period is mid-week. Want to know something specific?'
};

function askQuestion() {
  const q = document.getElementById('question').value.toLowerCase();
  const answerEl = document.getElementById('answer');
  answerEl.style.display = 'block';
  answerEl.innerHTML = '<span style="color:var(--muted);font-style:italic;">Analyzing...</span>';
  
  setTimeout(() => {
    let ans = answers.default;
    if (q.includes('busy') || q.includes('peak')) ans = answers.busiest;
    else if (q.includes('average') || q.includes('daily')) ans = answers.average;
    else if (q.includes('trend') || q.includes('growth')) ans = answers.trend;
    
    answerEl.innerHTML = '<span style="color:var(--green);font-weight:600;">üìä Insight:</span> ' + ans;
  }, 1000);
}
</script>
</body>
</html>
